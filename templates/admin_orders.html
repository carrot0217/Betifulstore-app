<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ğŸ“‹ ì „ì²´ ì£¼ë¬¸ ëª©ë¡</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #fffaf3;
      text-align: center;
      padding: 30px;
    }
    h1 {
      color: #5a4031;
      margin-bottom: 20px;
    }
    .filter-form {
      margin-bottom: 24px;
      font-size: 1em;
    }
    .filter-form input[type="date"],
    .filter-form input[type="text"],
    .filter-form select {
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: #ffe0b2;
      margin: 0 5px;
    }
    table {
      margin: auto;
      border-collapse: collapse;
      width: 95%;
    }
    th, td {
      border: 1px solid #ddd;
      padding: 10px;
      vertical-align: top;
    }
    th {
      background-color: #ffcc80;
    }
    .btn {
      background-color: #aed581;
      border: none;
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      margin: 2px;
    }
    .btn-download {
      background-color: #ffcc80;
      color: #4e342e;
      border: none;
      border-radius: 8px;
      padding: 9px 20px;
      font-weight: bold;
      margin-left: 8px;
      cursor: pointer;
      transition: background 0.18s;
    }
    .btn-download:hover {
      background-color: #ffc04d;
    }
    .status-cancelled {
      color: #d32f2f;
      font-weight: bold;
    }
    .status-deleted {
      color: red;
      font-weight: bold;
    }
    small {
      font-size: 0.85em;
      color: #444;
    }
  </style>
</head>
<body>

  <!-- âœ… ì´ì „ í™”ë©´ ë²„íŠ¼ -->
  <div style="margin-bottom: 18px; text-align: left;">
    <a href="{{ url_for('dashboard') }}" style="
        background-color: #ffd180;
        color: #4e342e;
        text-decoration: none;
        padding: 10px 18px;
        border-radius: 12px;
        font-weight: bold;
        box-shadow: 0 2px 6px #ffecb3;
        display: inline-block;
    ">â¬…ï¸ ì´ì „ í™”ë©´</a>
  </div>

  <h1>ğŸ“‹ ì „ì²´ ì£¼ë¬¸ ëª©ë¡</h1>

  <form class="filter-form" method="get" action="">
    <select name="status">
      {% for s in status_choices %}
        <option value="{{s}}" {% if s == status %}selected{% endif %}>{{s}}</option>
      {% endfor %}
    </select>
    <input type="date" name="start_date" value="{{start_date}}">
    <input type="date" name="end_date" value="{{end_date}}">
    <input type="text" name="keyword" value="{{keyword}}" placeholder="ë§¤ì¥/í’ˆëª©ëª… ê²€ìƒ‰">
    <button type="submit">ğŸ” í•„í„° ì ìš©</button>
  </form>

  <table>
    <thead>
      <tr>
        <th>ì£¼ë¬¸ì¼</th>
        <th>ë§¤ì¥</th>
        <th>í’ˆëª©</th>
        <th>ìˆ˜ëŸ‰</th>
        <th>ìƒíƒœ</th>
        <th>ë°°ì†¡ì¼</th>
      </tr>
    </thead>
    <tbody>
      {% for order in orders %}
        <tr>
          <td>{{ order[1] }}</td> <!-- ì£¼ë¬¸ì¼ -->
          <td>{{ order[2] }}</td> <!-- ë§¤ì¥ -->
          <td>{{ order[3] }}</td> <!-- í’ˆëª© -->
          <td>{{ order[4] }}</td> <!-- ìˆ˜ëŸ‰ -->
          <td>
            {% if order[5] == 'ì‚­ì œë¨' %}
              <span class="status-deleted">ì‚­ì œë¨</span><br>
              {% if order[8] %}
                <small>{{ order[8] }}</small><br>
              {% endif %}
              <form method="post" action="{{ url_for('admin_delete_order', order_id=order[0]) }}" style="margin-top: 6px;">
                <button type="submit" class="btn btn-download" onclick="return confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')">ì‚­ì œ</button>
              </form>
            {% elif order[5].startswith('ì·¨ì†Œë¨') %}
              <span class="status-cancelled">{{ order[5] }}</span><br>
              {% if order[8] %}
                <small>{{ order[8] }}</small>
              {% endif %}
            {% else %}
              {{ order[5] }}
            {% endif %}
          </td>
          <td>
            {% if order[5] == 'ëŒ€ê¸° ì¤‘' %}
              <form method="POST" action="{{ url_for('set_delivery', order_id=order[0]) }}">
                <input type="date" name="delivery_date" value="{{ order[6] if order[6] else '' }}">
                <button class="btn" type="submit">ğŸ“¦ ë°°ì†¡ì¼ ì…ë ¥</button>
              </form>
            {% else %}
              {{ order[6] }}
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

</body>
</html>

